// Generated by CoffeeScript 1.9.1
var FIOSinglePostAnimation,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

FIOSinglePostAnimation = (function() {
  function FIOSinglePostAnimation() {
    this.handle_scroll = bind(this.handle_scroll, this);
    this.hide_navbar = bind(this.hide_navbar, this);
    this.show_navbar = bind(this.show_navbar, this);
    this.update_navbar = bind(this.update_navbar, this);
    this.setup_data = bind(this.setup_data, this);
    this.setup_data();
    this.handle_scroll();
  }

  FIOSinglePostAnimation.prototype.setup_data = function() {
    // console.log("setup");
    this.j_elem = jQuery("#fixed-navbar");
    this.navbar_is_visible = false;
    this.jWindow = jQuery(window);
    this.navbar2_threshold_top = 66;
    // this.navbar_threshold_bottom = jQuery("#flag").offset().top - 550;
    this.navbar = jQuery("#navbar");
    return this.navbar2 = new JTSmoothSurface({
      element_id: "fixed-navbar"
    });
  };


  FIOSinglePostAnimation.prototype.update_navbar = function(scrollTop) {
    if (scrollTop > this.navbar2_threshold_top) {
      if (!this.navbar_is_visible) {
        this.navbar_is_visible = true;
        return this.show_navbar();
      }
    } else {
      if (this.navbar_is_visible) {
        this.navbar_is_visible = false;
        return this.hide_navbar();
      }
    }
  };


  FIOSinglePostAnimation.prototype.show_navbar = function() {
    this.navbar.css({
      visibility: 'hidden'
    });
    console.log("passsed");
    this.j_elem.css({
      position: 'fixed', 
    });
    this.navbar2.animate_abs({
      ty: 80
    }, 250, JTCurve.accel);
  };

  FIOSinglePostAnimation.prototype.hide_navbar = function() {
    this.navbar.css({
      visibility: 'visible'
    });
    this.navbar2.animate_abs({
      ty: 0
    }, 250, JTCurve.accel);
  };



  FIOSinglePostAnimation.prototype.handle_scroll = function() {
    return jQuery(window).on("scroll", (function(_this) {
      return function() {
        var scrollTop;
        scrollTop = _this.jWindow.scrollTop();
        _this.update_navbar(scrollTop);
      };
    })(this));
  };

  jQuery(function() {
    return window.vc = new FIOSinglePostAnimation();
  });

  return FIOSinglePostAnimation;

})();
